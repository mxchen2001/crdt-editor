(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t,n){},138:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(20),r=n.n(a),l=n(83),i=n(39),o=n(16),u=n(4),j=n(77),d=n(6),b=n(10),h=n.n(b),g=(n(132),n(49));function f(e,t,n){function c(e,t,n){for(var c=new Map,s=t;s<=n;s++){var a=e[s];c.has(a)?(c.get(a).count++,c.get(a).index=s):c.set(a,{count:1,index:s})}return c.forEach((function(e,t,n){1!==e.count?n.delete(t):n.set(t,e.index)})),c}function s(e,t,n,s,a,r){var l=c(e,t,n),i=c(s,a,r);return l.forEach((function(e,t,n){i.has(t)?n.set(t,{indexA:e,indexB:i.get(t)}):n.delete(t)})),l}var a=[],r=0,l=0,i=[],o=[],u=[],j=[];function d(n,c){c<0?(i.push(e[n]),o.push(a.length),r++):n<0&&(u.push(t[c]),j.push(a.length),l++),a.push({line:0<=n?e[n]:t[c],aIndex:n,bIndex:c})}function b(n,c,a,r){for(;n<=c&&a<=r&&e[n]===t[a];)d(n++,a++);for(var l=c;n<=c&&a<=r&&e[c]===t[r];)c--,r--;var i=s(e,n,c,t,a,r);if(0===i.size){for(;n<=c;)d(n++,-1);for(;a<=r;)d(-1,a++)}else h(n,c,a,r,i);for(;c<l;)d(++c,++r)}function h(n,c,a,r,l){var i=function(e){var t=[];e.forEach((function(e,n,c){for(var s=0;t[s]&&t[s][t[s].length-1].indexB<e.indexB;)s++;t[s]||(t[s]=[]),0<s&&(e.prev=t[s-1][t[s-1].length-1]),t[s].push(e)}));var n=[];if(0<t.length){var c=t.length-1;for(n=[t[c][t[c].length-1]];n[n.length-1].prev;)n.push(n[n.length-1].prev)}return n.reverse()}(l||s(e,n,c,t,a,r));if(0===i.length)b(n,c,a,r);else{var o;for((n<i[0].indexA||a<i[0].indexB)&&b(n,i[0].indexA-1,a,i[0].indexB-1),o=0;o<i.length-1;o++)b(i[o].indexA,i[o+1].indexA-1,i[o].indexB,i[o+1].indexB-1);(i[o].indexA<=c||i[o].indexB<=r)&&b(i[o].indexA,c,i[o].indexB,r)}}return h(0,e.length-1,0,t.length-1),n?{lines:a,lineCountDeleted:r,lineCountInserted:l,lineCountMoved:0,aMove:i,aMoveIndex:o,bMove:u,bMoveIndex:j}:{lines:a,lineCountDeleted:r,lineCountInserted:l,lineCountMoved:0}}var x=n(2),O=Object(c.createContext)();var p=function(e){var t=Object(c.useState)("javascript"),n=Object(u.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(!0),l=Object(u.a)(r,2),i=l[0],o=l[1],j=Object(c.useState)(!1),d=Object(u.a)(j,2),b=d[0],h=d[1];return Object(x.jsx)(O.Provider,{value:{language:s,setLanguage:a,dark:i,setDark:o,status:b,setStatus:h},children:e.children})};function v(e){var t=Object(d.g)().id,n=Object(c.useState)(),s=Object(u.a)(n,2),a=s[0],r=s[1],b=Object(c.useState)(),p=Object(u.a)(b,2),v=p[0],y=p[1],m=Object(c.useState)(),S=Object(u.a)(m,2),N=S[0],k=S[1],C=Object(c.useState)(""),w=Object(u.a)(C,2),I=w[0],M=w[1],E=Object(c.useState)({}),A=Object(u.a)(E,2),B=A[0],D=A[1],J=Object(c.useState)({lineNumber:1,column:1}),q=Object(u.a)(J,2),z=q[0],P=q[1],L=Object(c.useState)({}),T=Object(u.a)(L,2),U=(T[0],T[1]),F=Object(c.useState)(null),H=Object(u.a)(F,2),R=H[0],V=H[1],G=Object(c.useState)(null),K=Object(u.a)(G,2),Q=(K[0],K[1]),W=Object(c.useContext)(O),X=W.language,Y=W.setLanguage,Z=W.status,$=W.setStatus;return Object(c.useEffect)((function(){var e=Object(j.io)("https://obscure-sands-22564.herokuapp.com/");r(e);var n=h.a.change(h.a.init(),(function(e){e.text=new h.a.Text}));return y(n),D(h.a.initSyncState()),e.emit("get-document",t),function(){$(!1),e.disconnect()}}),[]),Object(c.useEffect)((function(){if(null!=a&&null!=N){var e=function(e){$(!0);var t=N.getPosition(),n=t.lineNumber,c=t.column;P({lineNumber:n,column:c});!function(e,t,n){e.split("\n").slice(0,t).join("\n").length}(I,n-1,c-1);var s=JSON.parse(e),a=s.state,r=s.changes,l=s.messages,j=s.language,d=s.cursorData;if(null!=d&&U((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},d.id,d.position))})),null!=j&&X!==j&&Y(j),null!=a&&null!=r&&null!=l){var b=JSON.parse(r).map((function(e){return new Uint8Array(Object.values(e).map((function(e){return e})))})),g=JSON.parse(l),f=Object.values(g).map((function(e){return e})),x=h.a.receiveSyncMessage(v,a,new Uint8Array(f)),O=Object(u.a)(x,2),p=O[0],m=O[1],S=h.a.applyChanges(p,b),k=Object(u.a)(S,1)[0],C=k.text.toString();y(h.a.clone(k)),M(C),D(m)}};return a.on("receive-changes",e),function(){a.off("receive-changes",e)}}}),[a,v,N]),Object(c.useEffect)((function(){if(null!=a&&null!=N){var t=function(){$(!0);var t=setTimeout((function(){try{var t=h.a.getChanges(h.a.init(),h.a.clone(v)),n=h.a.generateSyncMessage(v,B),c=Object(u.a)(n,2),s=c[0],r=c[1],l={state:s,messages:JSON.stringify(r),changes:JSON.stringify(t),language:e.language,cursorData:{id:a.id,position:N.getPosition()}};V(l)}catch(i){$(!1)}}),2e3);return function(){return clearTimeout(t)}};return a.on("synchronize-editor",t),function(){a.off("synchronize-editor",t)}}}),[a,v]),Object(c.useEffect)((function(){null!=a&&null!=N&&V({state:null,messages:null,changes:null,language:X})}),[X]),Object(c.useEffect)((function(){if(null!=R&&null!=a){var e=setInterval((function(){a.emit("send-changes",JSON.stringify(R),t),V(null)}),250);return function(){clearInterval(e)}}}),[R]),Object(c.useEffect)((function(){if(null!=a&&null!=N){var e=N.getModel();null!=e&&e.getValue()!=I&&(N.executeEdits("",[{forceMoveMarkers:!1,range:e.getFullModelRange(),text:I}],(function(){return null})),N.setPosition(z))}}),[I]),Object(x.jsx)("div",{className:"container",children:Object(x.jsx)(g.a,{height:"calc(100vh - 63px)",theme:e.theme,language:X,onMount:function(e,t){k(e),Q(t)},onChange:function(t,n){if(t!==v.text.toString()&&t!==I){var c=function(e,t){var n=f(e.split(""),t.split(""),!1),c=[],s=0,a=0,r=0;n.lines.forEach((function(e,t){if(e.aIndex>=0&&e.bIndex>=0)return s++,a=0,r=0,void c.push({retain:s});if(e.aIndex>=0&&e.bIndex<=0&&(r++,a=0,s=0,c.push({delete:r})),e.aIndex<=0&&e.bIndex>=0){var n="";n=a>0&&t>0?c[t-1].insert+e.line:e.line,a++,r=0,s=0,c.push({insert:n})}}));var l=[];1==c.length&&l.push(c[0]);for(var i=0;i<c.length-1;i++){var o=i+1;Object.keys(c[o])[0]!==Object.keys(c[i])[0]&&l.push(c[i]),o==c.length-1&&l.push(c[o])}return l}(v.text.toString(),t),s=0;try{var r=h.a.change(v,"change",(function(e){e.text||(e.text=new h.a.Text);for(var t=0;t<c.length;t++)if(c[t].retain)s+=c[t].retain;else if(c[t].delete)e.text.deleteAt(s,c[t].delete);else if(c[t].insert){var n,a=c[t].insert.split("");(n=e.text).insertAt.apply(n,[s].concat(Object(l.a)(a))),s+=c[t].insert.length}})),i=h.a.getChanges(h.a.init(),h.a.clone(r)),o=h.a.generateSyncMessage(r,B),j=Object(u.a)(o,2),d=j[0],b=j[1],g={state:d,messages:JSON.stringify(b),changes:JSON.stringify(i),language:e.language,cursorData:{id:a.id,position:N.getPosition()}};V(g),y(r),D(d),M(t),Z||$(!0)}catch(x){$(!1)}}}})})}n(138);var y=n(147),m=n(79),S=n(80),N=n.n(S),k=n(40),C=n(54),w=n(53),I=n(25),M=n(7),E=n(52),A=n(81),B={bat:Object(x.jsx)(I.f,{style:{color:"#61a5c1"}}),c:Object(x.jsx)(M.a,{style:{color:"#61a5c1"}}),cpp:Object(x.jsx)(M.c,{style:{color:"#6d94c7"}}),css:Object(x.jsx)(I.a,{style:{color:"#3570b0"}}),coffeescript:Object(x.jsx)(M.b,{style:{color:"hsl(223, 28%, 53%)"}}),csharp:Object(x.jsx)(M.d,{style:{color:"#4a9738"}}),dockerfile:Object(x.jsx)(M.e,{style:{color:"#4598c2"}}),fsharp:Object(x.jsx)(I.b,{style:{color:"#5ab0d0"}}),go:Object(x.jsx)(I.c,{}),graphql:Object(x.jsx)(E.a,{style:{color:"#c82a90"}}),html:Object(x.jsx)(w.b,{style:{color:"#d86b3a"}}),java:Object(x.jsx)(M.f,{style:{color:"#d23c35"}}),javascript:Object(x.jsx)(M.g,{style:{color:"#e5d565"}}),json:Object(x.jsx)(k.a,{style:{color:"#e5d565"}}),kotlin:Object(x.jsx)(M.h,{style:{color:"#7c77d2"}}),less:Object(x.jsx)(I.d,{}),lua:Object(x.jsx)(M.i,{style:{color:"\thsla(241, 80%, 65%, 0.8)"}}),markdown:Object(x.jsx)(M.j,{}),mysql:Object(x.jsx)(E.b,{style:{color:"hsl(204, 54%, 53%)"}}),perl:Object(x.jsx)(M.k,{style:{color:"hsl(208, 61%, 43%)"}}),pgsql:Object(x.jsx)(M.l,{style:{color:"#3e6e89"}}),php:Object(x.jsx)(I.e,{}),powershell:Object(x.jsx)(M.m,{style:{color:"#3171b2"}}),python:Object(x.jsx)(M.n,{style:{color:"#efd162"}}),r:Object(x.jsx)(M.o,{style:{color:"#61a5c1"}}),redis:Object(x.jsx)(M.p,{style:{color:"#c03b2b"}}),ruby:Object(x.jsx)(M.q,{style:{color:"#d53227"}}),rust:Object(x.jsx)(M.r,{}),shell:Object(x.jsx)(A.a,{}),sql:Object(x.jsx)(w.a,{style:{color:"#f25890"}}),swift:Object(x.jsx)(M.s,{style:{color:"#efa251"}}),typescript:Object(x.jsx)(M.t,{style:{color:"#4572c0"}})};function D(e){var t=e.language?e.language:"";return""===t?Object(x.jsx)(C.a,{}):B[t]?B[t]:Object(x.jsx)(C.a,{})}var J=function(){var e=Object(d.g)().id,t=Object(c.useContext)(O),n=t.language,s=t.setLanguage,a=t.dark,r=t.setDark,l=t.status,i=(t.setStatus,Object(c.useState)(!1)),o=Object(u.a)(i,2),j=o[0],b=o[1],h=Object(c.useState)(""),g=Object(u.a)(h,2),f=g[0],p=g[1],S=function(){p(""),b(!1)};return Object(x.jsxs)("div",{className:"editor-wrapper",children:[Object(x.jsx)(y.a,{open:j,onClose:S,disableAutoFocus:!0,disableEnforceFocus:!0,BackdropProps:{invisible:!0},children:Object(x.jsxs)("div",{className:"search-modal",children:[Object(x.jsx)("form",{className:"language-search-container",children:Object(x.jsx)("input",{type:"text",placeholder:"Search language mode",className:"language-search",onChange:function(e){return p(e.target.value)}})}),Object(x.jsx)("div",{className:"language-search-result",children:m.filter((function(e){return e.includes(f)})).map((function(e,t){return Object(x.jsxs)("div",{className:"language-selection",onClick:function(){s(e),S()},children:[Object(x.jsx)("div",{className:"language-icon",children:Object(x.jsx)(D,{language:e})}),e.toUpperCase()[0]+e.slice(1)]},"language-"+t)}))})]})}),Object(x.jsxs)("div",{className:"editor-header",children:[Object(x.jsxs)("div",{className:"editor-header-left",children:["Document ID: ",e]}),Object(x.jsxs)("div",{className:"editor-header-right",children:[Object(x.jsx)("span",{className:"status-dot ".concat(l?"status-dot-sync":"status-dot-desync")}),Object(x.jsx)("div",{className:"status-message",children:l?"Synchronized":"Desynchronized"}),Object(x.jsx)("label",{children:Object(x.jsx)(N.a,{checked:a,onChange:function(){r(!a)},onColor:"#4b99f0",onHandleColor:"#fff",handleDiameter:18,uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 10px rgba(0, 0, 0, 0.2)",height:18,width:40,className:"react-switch",id:"material-switch"})})]})]}),Object(x.jsx)("div",{className:"editor-body",children:Object(x.jsx)(v,{theme:a?"vs-dark":"vs",language:n})}),Object(x.jsxs)("div",{className:"editor-footer",children:[Object(x.jsxs)("div",{className:"editor-footer-version editor-footer-text",children:[Object(x.jsx)(k.b,{}),Object(x.jsx)("a",{style:{marginLeft:"7px"},children:"MergePad"})]}),Object(x.jsx)("div",{className:"editor-footer-language editor-footer-text",onClick:function(){b(!0)},children:n.toUpperCase()[0]+n.slice(1)})]})]})},q=n(37),z=n(148);var P=function(){return Object(x.jsx)(q.a,{children:Object(x.jsxs)(d.d,{children:[Object(x.jsx)(d.b,{path:"/:id",children:Object(x.jsx)(p,{children:Object(x.jsx)(J,{})})}),Object(x.jsx)(d.b,{path:"/",children:Object(x.jsx)(d.a,{to:"/".concat(Object(z.a)())})})]})})};n(140);r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(P,{})}),document.getElementById("root"))},79:function(e){e.exports=JSON.parse('["apex","azcli","bat","c","clojure","coffeescript","cpp","csharp","csp","css","dockerfile","fsharp","go","graphql","handlebars","html","ini","java","javascript","json","kotlin","less","lua","markdown","msdax","mysql","objective-c","pascal","perl","pgsql","php","plaintext","postiats","powerquery","powershell","pug","python","r","razor","redis","redshift","ruby","rust","sb","scheme","scss","shell","sol","sql","st","swift","tcl","typescript","vb","xml","yaml"]')}},[[141,1,2]]]);
//# sourceMappingURL=main.01c53b1e.chunk.js.map