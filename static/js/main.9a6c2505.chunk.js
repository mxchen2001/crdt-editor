(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t,n){},138:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(20),r=n.n(a),l=n(83),o=n(39),i=n(16),u=n(4),j=n(77),d=n(6),b=n(10),h=n.n(b),g=(n(132),n(49));function f(e,t,n){function s(e,t,n){for(var s=new Map,c=t;c<=n;c++){var a=e[c];s.has(a)?(s.get(a).count++,s.get(a).index=c):s.set(a,{count:1,index:c})}return s.forEach((function(e,t,n){1!==e.count?n.delete(t):n.set(t,e.index)})),s}function c(e,t,n,c,a,r){var l=s(e,t,n),o=s(c,a,r);return l.forEach((function(e,t,n){o.has(t)?n.set(t,{indexA:e,indexB:o.get(t)}):n.delete(t)})),l}var a=[],r=0,l=0,o=[],i=[],u=[],j=[];function d(n,s){s<0?(o.push(e[n]),i.push(a.length),r++):n<0&&(u.push(t[s]),j.push(a.length),l++),a.push({line:0<=n?e[n]:t[s],aIndex:n,bIndex:s})}function b(n,s,a,r){for(;n<=s&&a<=r&&e[n]===t[a];)d(n++,a++);for(var l=s;n<=s&&a<=r&&e[s]===t[r];)s--,r--;var o=c(e,n,s,t,a,r);if(0===o.size){for(;n<=s;)d(n++,-1);for(;a<=r;)d(-1,a++)}else h(n,s,a,r,o);for(;s<l;)d(++s,++r)}function h(n,s,a,r,l){var o=function(e){var t=[];e.forEach((function(e,n,s){for(var c=0;t[c]&&t[c][t[c].length-1].indexB<e.indexB;)c++;t[c]||(t[c]=[]),0<c&&(e.prev=t[c-1][t[c-1].length-1]),t[c].push(e)}));var n=[];if(0<t.length){var s=t.length-1;for(n=[t[s][t[s].length-1]];n[n.length-1].prev;)n.push(n[n.length-1].prev)}return n.reverse()}(l||c(e,n,s,t,a,r));if(0===o.length)b(n,s,a,r);else{var i;for((n<o[0].indexA||a<o[0].indexB)&&b(n,o[0].indexA-1,a,o[0].indexB-1),i=0;i<o.length-1;i++)b(o[i].indexA,o[i+1].indexA-1,o[i].indexB,o[i+1].indexB-1);(o[i].indexA<=s||o[i].indexB<=r)&&b(o[i].indexA,s,o[i].indexB,r)}}return h(0,e.length-1,0,t.length-1),n?{lines:a,lineCountDeleted:r,lineCountInserted:l,lineCountMoved:0,aMove:o,aMoveIndex:i,bMove:u,bMoveIndex:j}:{lines:a,lineCountDeleted:r,lineCountInserted:l,lineCountMoved:0}}var O=n(2),x=Object(s.createContext)();var p=function(e){var t=Object(s.useState)("javascript"),n=Object(u.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(!0),l=Object(u.a)(r,2),o=l[0],i=l[1],j=Object(s.useState)(!1),d=Object(u.a)(j,2),b=d[0],h=d[1];return Object(O.jsx)(x.Provider,{value:{language:c,setLanguage:a,dark:o,setDark:i,status:b,setStatus:h},children:e.children})};function v(e){var t=Object(d.g)().id,n=Object(s.useState)(),c=Object(u.a)(n,2),a=c[0],r=c[1],b=Object(s.useState)(),p=Object(u.a)(b,2),v=p[0],m=p[1],y=Object(s.useState)(),S=Object(u.a)(y,2),N=S[0],k=S[1],C=Object(s.useState)(""),w=Object(u.a)(C,2),M=w[0],I=w[1],E=Object(s.useState)({}),D=Object(u.a)(E,2),A=D[0],B=D[1],J=Object(s.useState)({lineNumber:1,column:1}),q=Object(u.a)(J,2),P=q[0],z=q[1],L=Object(s.useState)({}),T=Object(u.a)(L,2),U=T[0],F=T[1],V=Object(s.useState)(null),H=Object(u.a)(V,2),R=H[0],G=H[1],K=Object(s.useState)(null),Q=Object(u.a)(K,2),W=(Q[0],Q[1]),X=Object(s.useContext)(x),Y=X.language,Z=X.setLanguage,$=X.status,_=X.setStatus;return Object(s.useEffect)((function(){var e=Object(j.io)("https://obscure-sands-22564.herokuapp.com/");r(e);var n=h.a.change(h.a.init(),(function(e){e.text=new h.a.Text}));return m(n),B(h.a.initSyncState()),e.emit("get-document",t),function(){_(!1),e.disconnect()}}),[]),Object(s.useEffect)((function(){if(null!=a&&null!=N){var e=function(e){_(!0);var t=N.getPosition(),n=t.lineNumber,s=t.column;z({lineNumber:n,column:s});!function(e,t,n){e.split("\n").slice(0,t).join("\n").length}(M,n-1,s-1);var c=JSON.parse(e),a=c.state,r=c.changes,l=c.messages,j=c.language,d=c.cursorData;if(null!=d&&F((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},d.id,d.position))})),null!=j&&Y!==j&&Z(j),null!=a&&null!=r&&null!=l){var b=JSON.parse(r).map((function(e){return new Uint8Array(Object.values(e).map((function(e){return e})))})),g=JSON.parse(l),f=Object.values(g).map((function(e){return e})),O=h.a.receiveSyncMessage(v,a,new Uint8Array(f)),x=Object(u.a)(O,2),p=x[0],y=x[1],S=h.a.applyChanges(p,b),k=Object(u.a)(S,1)[0],C=k.text.toString();m(h.a.clone(k)),I(C),B(y)}};return a.on("receive-changes",e),function(){a.off("receive-changes",e)}}}),[a,v,N]),Object(s.useEffect)((function(){if(null!=a&&null!=N){var t=function(){_(!0);var t=setTimeout((function(){try{var t=h.a.getChanges(h.a.init(),h.a.clone(v)),n=h.a.generateSyncMessage(v,A),s=Object(u.a)(n,2),c=s[0],r=s[1],l={state:c,messages:JSON.stringify(r),changes:JSON.stringify(t),language:e.language,cursorData:{id:a.id,position:N.getPosition()}};G(l)}catch(o){_(!1)}}),2e3);return function(){return clearTimeout(t)}};return a.on("synchronize-editor",t),function(){a.off("synchronize-editor",t)}}}),[a,v]),Object(s.useEffect)((function(){null!=a&&null!=N&&G({state:null,messages:null,changes:null,language:Y})}),[Y]),Object(s.useEffect)((function(){if(null!=R&&null!=a){var e=setInterval((function(){a.emit("send-changes",JSON.stringify(R),t),G(null)}),250);return function(){clearInterval(e)}}}),[R]),Object(s.useEffect)((function(){if(null!=a&&null!=N){var e=N.getModel();null!=e&&e.getValue()!=M&&(N.executeEdits("",[{forceMoveMarkers:!1,range:e.getFullModelRange(),text:M}],(function(){return null})),N.setPosition(P))}}),[M]),Object(s.useEffect)((function(){null!=a&&null!=N&&N.onDidChangeCursorPosition((function(e){console.log(e);var t=e.position,n=e.reason,s=e.source;if("modelChange"!==s&&"api"!==s&&("keyboard"===s||"mouse"===s)&&3===n){z(t);var c={state:null,messages:null,changes:null,language:null,cursorData:{id:a.id,position:t}};G(c)}}))}),[N]),Object(s.useEffect)((function(){null!=a&&null!=N&&N.getModel().setValue(N.getModel().getValue())}),[U]),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)(g.a,{height:"calc(100vh - 63px)",theme:e.theme,language:Y,onMount:function(e,t){k(e),W(t)},onChange:function(t,n){if(t!==v.text.toString()&&t!==M){var s=function(e,t){var n=f(e.split(""),t.split(""),!1),s=[],c=0,a=0,r=0;n.lines.forEach((function(e,t){if(e.aIndex>=0&&e.bIndex>=0)return c++,a=0,r=0,void s.push({retain:c});if(e.aIndex>=0&&e.bIndex<=0&&(r++,a=0,c=0,s.push({delete:r})),e.aIndex<=0&&e.bIndex>=0){var n="";n=a>0&&t>0?s[t-1].insert+e.line:e.line,a++,r=0,c=0,s.push({insert:n})}}));var l=[];1==s.length&&l.push(s[0]);for(var o=0;o<s.length-1;o++){var i=o+1;Object.keys(s[i])[0]!==Object.keys(s[o])[0]&&l.push(s[o]),i==s.length-1&&l.push(s[i])}return l}(v.text.toString(),t),c=0;try{var r=h.a.change(v,"change",(function(e){e.text||(e.text=new h.a.Text);for(var t=0;t<s.length;t++)if(s[t].retain)c+=s[t].retain;else if(s[t].delete)e.text.deleteAt(c,s[t].delete);else if(s[t].insert){var n,a=s[t].insert.split("");(n=e.text).insertAt.apply(n,[c].concat(Object(l.a)(a))),c+=s[t].insert.length}})),o=h.a.getChanges(h.a.init(),h.a.clone(r)),i=h.a.generateSyncMessage(r,A),j=Object(u.a)(i,2),d=j[0],b=j[1],g={state:d,messages:JSON.stringify(b),changes:JSON.stringify(o),language:e.language,cursorData:{id:a.id,position:N.getPosition()}};G(g),m(r),B(d),I(t),$||_(!0)}catch(O){_(!1)}}}})})}n(138);var m=n(147),y=n(79),S=n(80),N=n.n(S),k=n(40),C=n(54),w=n(53),M=n(25),I=n(7),E=n(52),D=n(81),A={bat:Object(O.jsx)(M.f,{style:{color:"#61a5c1"}}),c:Object(O.jsx)(I.a,{style:{color:"#61a5c1"}}),cpp:Object(O.jsx)(I.c,{style:{color:"#6d94c7"}}),css:Object(O.jsx)(M.a,{style:{color:"#3570b0"}}),coffeescript:Object(O.jsx)(I.b,{style:{color:"hsl(223, 28%, 53%)"}}),csharp:Object(O.jsx)(I.d,{style:{color:"#4a9738"}}),dockerfile:Object(O.jsx)(I.e,{style:{color:"#4598c2"}}),fsharp:Object(O.jsx)(M.b,{style:{color:"#5ab0d0"}}),go:Object(O.jsx)(M.c,{}),graphql:Object(O.jsx)(E.a,{style:{color:"#c82a90"}}),html:Object(O.jsx)(w.b,{style:{color:"#d86b3a"}}),java:Object(O.jsx)(I.f,{style:{color:"#d23c35"}}),javascript:Object(O.jsx)(I.g,{style:{color:"#e5d565"}}),json:Object(O.jsx)(k.a,{style:{color:"#e5d565"}}),kotlin:Object(O.jsx)(I.h,{style:{color:"#7c77d2"}}),less:Object(O.jsx)(M.d,{}),lua:Object(O.jsx)(I.i,{style:{color:"\thsla(241, 80%, 65%, 0.8)"}}),markdown:Object(O.jsx)(I.j,{}),mysql:Object(O.jsx)(E.b,{style:{color:"hsl(204, 54%, 53%)"}}),perl:Object(O.jsx)(I.k,{style:{color:"hsl(208, 61%, 43%)"}}),pgsql:Object(O.jsx)(I.l,{style:{color:"#3e6e89"}}),php:Object(O.jsx)(M.e,{}),powershell:Object(O.jsx)(I.m,{style:{color:"#3171b2"}}),python:Object(O.jsx)(I.n,{style:{color:"#efd162"}}),r:Object(O.jsx)(I.o,{style:{color:"#61a5c1"}}),redis:Object(O.jsx)(I.p,{style:{color:"#c03b2b"}}),ruby:Object(O.jsx)(I.q,{style:{color:"#d53227"}}),rust:Object(O.jsx)(I.r,{}),shell:Object(O.jsx)(D.a,{}),sql:Object(O.jsx)(w.a,{style:{color:"#f25890"}}),swift:Object(O.jsx)(I.s,{style:{color:"#efa251"}}),typescript:Object(O.jsx)(I.t,{style:{color:"#4572c0"}})};function B(e){var t=e.language?e.language:"";return""===t?Object(O.jsx)(C.a,{}):A[t]?A[t]:Object(O.jsx)(C.a,{})}var J=function(){var e=Object(d.g)().id,t=Object(s.useContext)(x),n=t.language,c=t.setLanguage,a=t.dark,r=t.setDark,l=t.status,o=(t.setStatus,Object(s.useState)(!1)),i=Object(u.a)(o,2),j=i[0],b=i[1],h=Object(s.useState)(""),g=Object(u.a)(h,2),f=g[0],p=g[1],S=function(){p(""),b(!1)};return Object(O.jsxs)("div",{className:"editor-wrapper",children:[Object(O.jsx)(m.a,{open:j,onClose:S,disableAutoFocus:!0,disableEnforceFocus:!0,BackdropProps:{invisible:!0},children:Object(O.jsxs)("div",{className:"search-modal",children:[Object(O.jsx)("form",{className:"language-search-container",children:Object(O.jsx)("input",{type:"text",placeholder:"Search language mode",className:"language-search",onChange:function(e){return p(e.target.value)}})}),Object(O.jsx)("div",{className:"language-search-result",children:y.filter((function(e){return e.includes(f)})).map((function(e,t){return Object(O.jsxs)("div",{className:"language-selection",onClick:function(){c(e),S()},children:[Object(O.jsx)("div",{className:"language-icon",children:Object(O.jsx)(B,{language:e})}),e.toUpperCase()[0]+e.slice(1)]},"language-"+t)}))})]})}),Object(O.jsxs)("div",{className:"editor-header",children:[Object(O.jsxs)("div",{className:"editor-header-left",children:["Document ID: ",e]}),Object(O.jsxs)("div",{className:"editor-header-right",children:[Object(O.jsx)("span",{className:"status-dot ".concat(l?"status-dot-sync":"status-dot-desync")}),Object(O.jsx)("div",{className:"status-message",children:l?"Synchronized":"Desynchronized"}),Object(O.jsx)("label",{children:Object(O.jsx)(N.a,{checked:a,onChange:function(){r(!a)},onColor:"#4b99f0",onHandleColor:"#fff",handleDiameter:18,uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 10px rgba(0, 0, 0, 0.2)",height:18,width:40,className:"react-switch",id:"material-switch"})})]})]}),Object(O.jsx)("div",{className:"editor-body",children:Object(O.jsx)(v,{theme:a?"vs-dark":"vs",language:n})}),Object(O.jsxs)("div",{className:"editor-footer",children:[Object(O.jsxs)("div",{className:"editor-footer-version editor-footer-text",children:[Object(O.jsx)(k.b,{}),Object(O.jsx)("a",{style:{marginLeft:"7px"},children:"MergePad"})]}),Object(O.jsx)("div",{className:"editor-footer-language editor-footer-text",onClick:function(){b(!0)},children:n.toUpperCase()[0]+n.slice(1)})]})]})},q=n(37),P=n(148);var z=function(){return Object(O.jsx)(q.a,{children:Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{path:"/",children:Object(O.jsx)(d.a,{to:"/documents/".concat(Object(P.a)())})}),Object(O.jsx)(d.b,{path:"/documents/:id",children:Object(O.jsx)(p,{children:Object(O.jsx)(J,{})})})]})})};n(140);r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(z,{})}),document.getElementById("root"))},79:function(e){e.exports=JSON.parse('["apex","azcli","bat","c","clojure","coffeescript","cpp","csharp","csp","css","dockerfile","fsharp","go","graphql","handlebars","html","ini","java","javascript","json","kotlin","less","lua","markdown","msdax","mysql","objective-c","pascal","perl","pgsql","php","plaintext","postiats","powerquery","powershell","pug","python","r","razor","redis","redshift","ruby","rust","sb","scheme","scss","shell","sol","sql","st","swift","tcl","typescript","vb","xml","yaml"]')}},[[141,1,2]]]);
//# sourceMappingURL=main.9a6c2505.chunk.js.map